<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
        <form id="the-form">
        <input type="file" id="postImage" />
        <button id="submit">submit</button>

    </form>
    <script>
        const input = document.getElementById('postImage');
        
        
        // This will upload the file after having read it
        const upload = (formData) => {
            formData.append('files', input.files[0]);
            console.log(formData.get("files"));
            
            // console.log(formData.entries().forEach(e=>{console.log(e);
            
            
            fetch('http://localhost:8080/uploadmultipleFiles', { //
                method: 'POST',
                headers: {
                    
                    
                    "Authorization": "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJvbGVrIiwiZXhwIjoxNTYxNTMzMzU0fQ.-4E9yeBww5b_XXIABEaEYXTrDn7k7Q63T7PBDHt1WVxl6ZD-6iBFj1sHPvdr-yWQw89bte95l6bIYyGnEqntKw"
                    // Content-Type may need to be completely **omitted**
                    // or you may need something
                    // "Content-Type": "You will perhaps need to define a content-type here"
                },
                body:formData // This is your file object
            }).then(
                response => response.json() // if the response is a JSON object
            ).then(
                success => console.log(success) // Handle the success response object
            ).catch(
                error => console.log(error) // Handle the error response object
            );
        };

        // Event handler executed when a file is selected
        let formData = new FormData();
    //file is actually new FileReader.readAsDataURL(myId.files[0]);
    // console.log( input.files[0]);
    
    
        const onSelectFile = () => upload(formData);

        // Add a listener on your input
        // It will be triggered when a file will be selected
        input.addEventListener('change', onSelectFile);
    </script>
</body>

</html>